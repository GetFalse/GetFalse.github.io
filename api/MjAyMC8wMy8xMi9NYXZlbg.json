{"title":"Maven坐标与依赖","date":"2020-03-12T20:01:11.000Z","date_formatted":{"ll":"Mar 12, 2020","L":"03/12/2020","MM-DD":"03-12"},"link":"2020/03/12/Maven","comments":true,"tags":["maven"],"categories":["配置"],"updated":"2020-03-18T02:44:34.985Z","content":"<h2 id=\"坐标\">坐标<a href=\"#坐标\" title=\"坐标\"></a></h2><p>在maven中，任何构件都有明确定义的坐标。这些坐标是通过一些元素定义的，下面是nexus-indexer的坐标定义：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.sonatype.nexus<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>nexus-indexer<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">packing</span>&gt;</span>jar<span class=\"tag\">&lt;/<span class=\"name\">packing</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><code>groupId</code>：定义当前maven项目隶属的实际项目，一般由公司前缀+隶属项目名称组成</p>\n<p><code>artifactId</code>：定义当前maven项目模块，一般由隶属项目名称+当前maven模块名称组成</p>\n<p><code>version</code>：版本号</p>\n<p><code>packing</code>：打包方式。有jar，war等，默认为jar classifier：定义构件输出的一些附属构件。本例主构件输出nexus-indexer-2.0.0.jar，附属构件比如有：nexus-indexer-2.0.0-javadoc.jar，nexus-indexer-2.0.0-source.jar等</p>\n<h2 id=\"依赖配置\">依赖配置<a href=\"#依赖配置\" title=\"依赖配置\"></a></h2><p>除了上面的基本坐标定义，依赖还可以包含：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">project</span>&gt;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>... <span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>... <span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>... <span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">type</span>&gt;</span>... <span class=\"tag\">&lt;/<span class=\"name\">type</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>... <span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">optional</span>&gt;</span>... <span class=\"tag\">&lt;/<span class=\"name\">optional</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">                ...</span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">            ...    </span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        ...</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">project</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p><code>type</code>：依赖的类型，对应坐标中的packing，默认为jar，一般不用声明</p>\n<p><code>scope</code>：依赖的范围</p>\n<p><code>optional</code>：标记依赖是否可选，若为true则为可选依赖。可选依赖不能传递</p>\n<p><code>exclusions</code>：用来排除传递性依赖</p>\n<h2 id=\"依赖范围\">依赖范围<a href=\"#依赖范围\" title=\"依赖范围\"></a></h2><p>在一个maven项目中主要有三个classpath：编译classpath，测试classpath，运行时classpath。下表列出了依赖范围和classpath的关系：</p>\n<div class=\"φcz\"><div class=\"φdb\"><table><thead><tr>\n<th>依赖范围 （Scope）</th><th>对于编译 classpath有效</th><th>对于测试 classpath有效</th><th>对于运行时 classpath有效</th><th>例子</th></tr>\n</thead><tbody><tr>\n<td>compile</td><td>√</td><td>√</td><td>√</td><td>spring-core</td></tr>\n<tr>\n<td>test</td><td>×</td><td>√</td><td>×</td><td>JUnit</td></tr>\n<tr>\n<td>provided</td><td>√</td><td>√</td><td>×</td><td>servlet-api</td></tr>\n<tr>\n<td>runtime</td><td>×</td><td>√</td><td>√</td><td>JDBC驱动实现</td></tr>\n<tr>\n<td>system</td><td>√</td><td>√</td><td>×</td><td>本地的，Maven仓库外的 类库文件</td></tr>\n</tbody></table></div></div><p><code>compile</code>：编译依赖范围</p>\n<p><code>test</code>：测试依赖范围</p>\n<p><code>provided</code>：已提供依赖范围</p>\n<p><code>runtime</code>：运行时依赖范围</p>\n<p><code>system</code>：系统依赖范围</p>\n<p><code>import</code>：导入依赖范围</p>\n<h2 id=\"传递性依赖\">传递性依赖<a href=\"#传递性依赖\" title=\"传递性依赖\"></a></h2><p>现有pom如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;project xmlns&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0&quot; </span><br><span class=\"line\">    xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;</span><br><span class=\"line\">    xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0 http:&#x2F;&#x2F;maven.apache.org&#x2F;xsd&#x2F;maven-4.0.0.xsd&quot;&gt;</span><br><span class=\"line\">    &lt;modelVersion&gt;4.0.0&lt;&#x2F;modelVersion&gt;</span><br><span class=\"line\">    &lt;groupId&gt;com.juven.mvnbook.account&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;account-email&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">    &lt;name&gt;Account Email&lt;&#x2F;name&gt;</span><br><span class=\"line\">    &lt;version&gt;1.0.0-SNAPSHOT&lt;&#x2F;version&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;dependencies&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;spring-core&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;4.3.3.RELEASE&lt;&#x2F;version&gt;</span><br><span class=\"line\">        &lt;&#x2F;dependency&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;spring-beans&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;4.3.3.RELEASE&lt;&#x2F;version&gt;</span><br><span class=\"line\">        &lt;&#x2F;dependency&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;spring-context&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;4.3.3.RELEASE&lt;&#x2F;version&gt;</span><br><span class=\"line\">        &lt;&#x2F;dependency&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;spring-context-support&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;4.3.3.RELEASE&lt;&#x2F;version&gt;</span><br><span class=\"line\">        &lt;&#x2F;dependency&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;javax.mail&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;mail&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;1.4.7&lt;&#x2F;version&gt;</span><br><span class=\"line\">        &lt;&#x2F;dependency&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;junit&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;junit&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;4.7&lt;&#x2F;version&gt;</span><br><span class=\"line\">            &lt;scope&gt;test&lt;&#x2F;scope&gt;</span><br><span class=\"line\">        &lt;&#x2F;dependency&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;com.icegreen&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;greenmail&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;1.5.2&lt;&#x2F;version&gt;</span><br><span class=\"line\">            &lt;scope&gt;test&lt;&#x2F;scope&gt;</span><br><span class=\"line\">        &lt;&#x2F;dependency&gt;</span><br><span class=\"line\">    &lt;&#x2F;dependencies&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;build&gt;</span><br><span class=\"line\">        &lt;plugins&gt;</span><br><span class=\"line\">            &lt;plugin&gt;</span><br><span class=\"line\">                &lt;groupId&gt;org.apache.maven.plugins&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">                &lt;artifactId&gt;maven-resources-plugin&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">                &lt;configuration&gt;</span><br><span class=\"line\">                    &lt;encoding&gt;UTF-8&lt;&#x2F;encoding&gt;</span><br><span class=\"line\">                &lt;&#x2F;configuration&gt;</span><br><span class=\"line\">            &lt;&#x2F;plugin&gt;</span><br><span class=\"line\">        &lt;&#x2F;plugins&gt;</span><br><span class=\"line\">    &lt;&#x2F;build&gt;</span><br><span class=\"line\">&lt;&#x2F;project&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>上面的xml中有一个org.springframework：spring-core.4.3.3.RELEASE.jar依赖。在中央仓库查看其xml，会发现其还包含了：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;commons-logging&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;commons-logging&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;1.2&lt;&#x2F;version&gt;</span><br><span class=\"line\">    &lt;scope&gt;compile&lt;&#x2F;scope&gt;</span><br><span class=\"line\">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>该依赖的范围为compile，而spring-core依赖没有直接声明依赖范围，默认为compile。现在account-email有一个compile范围的spring-core依赖，spring-core有一个compile范围的comms-logging依赖，所以comms-logging会成为account-email的compile范围的<strong>传递性依赖</strong>。</p>\n<p>现假设A依赖于B，B依赖于C，那么A相对于B是第一直接依赖，B相对于C是第二直接依赖，A相对于C是传递性依赖，其依赖范围按下表定义：</p>\n<div class=\"φcz\"><div class=\"φdb\"><table><thead><tr>\n<th style=\"padding:0\"></th><th>compile</th><th>test</th><th>provided</th><th>runtime</th></tr>\n</thead><tbody><tr>\n<td>compile</td><td>compile</td><td>—</td><td>—</td><td>compile</td></tr>\n<tr>\n<td>test</td><td>test</td><td>—</td><td>—</td><td>test</td></tr>\n<tr>\n<td>provided</td><td>provided</td><td>—</td><td>provided</td><td>provided</td></tr>\n<tr>\n<td>runtime</td><td>runtime</td><td>—</td><td>—</td><td>runtime</td></tr>\n</tbody></table></div></div><p>表中，第一列是第一直接依赖范围，第一行是第二直接依赖范围，交叉部分是最终传递性依赖范围。</p>\n<h2 id=\"依赖调解\">依赖调解<a href=\"#依赖调解\" title=\"依赖调解\"></a></h2><p>依赖调解有两个原则：</p>\n<p>1.路径最近的优先</p>\n<p>现在有如下两个依赖：</p>\n<p>A → B → C → X（1.0.0）</p>\n<p>A → B → X（1.2.1）</p>\n<p>A有两个版本的传递性依赖X，因为X（1.2.1）路径较短，所以最终X（1.2.1）会被解析使用。</p>\n<p>2.第一声明者优先</p>\n<p>现在有如下两个依赖：</p>\n<p>A → B → X（1.0.0）</p>\n<p>A → B → X（1.2.1）</p>\n<p>两个版本X的依赖路径一样长，这时候谁被解析取决于谁先定义！</p>\n<h2 id=\"排除依赖\">排除依赖<a href=\"#排除依赖\" title=\"排除依赖\"></a></h2><p>使用<code>compile:tree</code>查看依赖树：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ account-email ---</span><br><span class=\"line\">[INFO] com.juven.mvnbook.account:account-email:jar:1.0.0-SNAPSHOT</span><br><span class=\"line\">[INFO] +- org.springframework:spring-core:jar:4.3.3.RELEASE:compile</span><br><span class=\"line\">[INFO] |  \\- commons-logging:commons-logging:jar:1.2:compile</span><br><span class=\"line\">[INFO] +- org.springframework:spring-beans:jar:4.3.3.RELEASE:compile</span><br><span class=\"line\">[INFO] +- org.springframework:spring-context:jar:4.3.3.RELEASE:compile</span><br><span class=\"line\">[INFO] |  +- org.springframework:spring-aop:jar:4.3.3.RELEASE:compile</span><br><span class=\"line\">[INFO] |  \\- org.springframework:spring-expression:jar:4.3.3.RELEASE:compile</span><br><span class=\"line\">[INFO] +- org.springframework:spring-context-support:jar:4.3.3.RELEASE:compile</span><br><span class=\"line\">[INFO] +- javax.mail:mail:jar:1.4.7:compile</span><br><span class=\"line\">[INFO] |  \\- javax.activation:activation:jar:1.1:compile</span><br><span class=\"line\">[INFO] +- junit:junit:jar:4.7:test</span><br><span class=\"line\">[INFO] \\- com.icegreen:greenmail:jar:1.5.2:test</span><br><span class=\"line\">[INFO]    +- com.sun.mail:javax.mail:jar:1.5.6:test</span><br><span class=\"line\">[INFO]    \\- org.slf4j:slf4j-api:jar:1.7.21:test</span><br></pre></td></tr></table></figure>\n\n\n\n<p>如上所述的，spring-core隐式依赖于commons-logging，如果不想传递此依赖，可以为spring-core添加exclusions元素：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;spring-core&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;4.3.3.RELEASE&lt;&#x2F;version&gt;</span><br><span class=\"line\">    &lt;exclusions&gt;</span><br><span class=\"line\">        &lt;exclusion&gt;</span><br><span class=\"line\">            &lt;groupId&gt;commons-logging&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;commons-logging&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">        &lt;&#x2F;exclusion&gt;</span><br><span class=\"line\">    &lt;&#x2F;exclusions&gt;</span><br><span class=\"line\">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>再次执行<code>dependency:tree</code>命令：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ account-email ---</span><br><span class=\"line\">[INFO] com.juven.mvnbook.account:account-email:jar:1.0.0-SNAPSHOT</span><br><span class=\"line\">[INFO] +- org.springframework:spring-core:jar:4.3.3.RELEASE:compile</span><br><span class=\"line\">[INFO] +- org.springframework:spring-beans:jar:4.3.3.RELEASE:compile</span><br><span class=\"line\">[INFO] +- org.springframework:spring-context:jar:4.3.3.RELEASE:compile</span><br><span class=\"line\">[INFO] |  +- org.springframework:spring-aop:jar:4.3.3.RELEASE:compile</span><br><span class=\"line\">[INFO] |  \\- org.springframework:spring-expression:jar:4.3.3.RELEASE:compile</span><br><span class=\"line\">[INFO] +- org.springframework:spring-context-support:jar:4.3.3.RELEASE:compile</span><br><span class=\"line\">[INFO] +- javax.mail:mail:jar:1.4.7:compile</span><br><span class=\"line\">[INFO] |  \\- javax.activation:activation:jar:1.1:compile</span><br><span class=\"line\">[INFO] +- junit:junit:jar:4.7:test</span><br><span class=\"line\">[INFO] \\- com.icegreen:greenmail:jar:1.5.2:test</span><br><span class=\"line\">[INFO]    +- com.sun.mail:javax.mail:jar:1.5.6:test</span><br><span class=\"line\">[INFO]    \\- org.slf4j:slf4j-api:jar:1.7.21:test</span><br></pre></td></tr></table></figure>\n\n\n\n<p>可发现spring-core已经不依赖于commons-logging了，当然这里只是单纯演示排除依赖，commons-logging对于Spring框架是必须的。</p>\n<h2 id=\"归类依赖\">归类依赖<a href=\"#归类依赖\" title=\"归类依赖\"></a></h2><p>在上述的pom中，spring的版本都为4.3.3.RELEASE版本，而且对于一个框架来说，其各个模块的版本一般都是一样的，这里我们可以统一声明其版本，然后引用即可：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;properties&gt;</span><br><span class=\"line\">    &lt;springframework.version&gt;4.3.3.RELEASE&lt;&#x2F;springframework.version&gt;</span><br><span class=\"line\">&lt;&#x2F;properties&gt;</span><br><span class=\"line\">...</span><br><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;spring-core&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;$&#123;springframework.version&#125;&lt;&#x2F;version&gt;</span><br><span class=\"line\">&lt;&#x2F;dependency&gt;</span><br><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;spring-beans&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;$&#123;springframework.version&#125;&lt;&#x2F;version&gt;</span><br><span class=\"line\">&lt;&#x2F;dependency&gt;</span><br><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;spring-context&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;$&#123;springframework.version&#125;&lt;&#x2F;version&gt;</span><br><span class=\"line\">&lt;&#x2F;dependency&gt;</span><br><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;spring-context-support&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;$&#123;springframework.version&#125;&lt;&#x2F;version&gt;</span><br><span class=\"line\">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>这样在以后更新spring版本的时候，只需要修改properties即可。</p>\n<h2 id=\"优化依赖\">优化依赖<a href=\"#优化依赖\" title=\"优化依赖\"></a></h2><p>除了使用<code>dependency:tree</code>命令外，还可使是<code>dependency:list</code>查看所有依赖：</p>\n<p>dependency:list</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[INFO] --- maven-dependency-plugin:2.8:list (default-cli) @ account-email ---</span><br><span class=\"line\">[INFO] </span><br><span class=\"line\">[INFO] The following files have been resolved:</span><br><span class=\"line\">[INFO]    org.springframework:spring-beans:jar:4.3.3.RELEASE:compile</span><br><span class=\"line\">[INFO]    org.springframework:spring-context-support:jar:4.3.3.RELEASE:compile</span><br><span class=\"line\">[INFO]    org.slf4j:slf4j-api:jar:1.7.21:test</span><br><span class=\"line\">[INFO]    junit:junit:jar:4.7:test</span><br><span class=\"line\">[INFO]    com.sun.mail:javax.mail:jar:1.5.6:test</span><br><span class=\"line\">[INFO]    com.icegreen:greenmail:jar:1.5.2:test</span><br><span class=\"line\">[INFO]    commons-logging:commons-logging:jar:1.2:compile</span><br><span class=\"line\">[INFO]    org.springframework:spring-aop:jar:4.3.3.RELEASE:compile</span><br><span class=\"line\">[INFO]    javax.activation:activation:jar:1.1:compile</span><br><span class=\"line\">[INFO]    javax.mail:mail:jar:1.4.7:compile</span><br><span class=\"line\">[INFO]    org.springframework:spring-core:jar:4.3.3.RELEASE:compile</span><br><span class=\"line\">[INFO]    org.springframework:spring-context:jar:4.3.3.RELEASE:compile</span><br><span class=\"line\">[INFO]    org.springframework:spring-expression:jar:4.3.3.RELEASE:compile</span><br></pre></td></tr></table></figure>\n\n\n\n<p>使用<code>dependency:analyze</code>分析依赖：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[INFO] &lt;&lt;&lt; maven-dependency-plugin:2.8:analyze (default-cli) @ account-email &lt;&lt;&lt;</span><br><span class=\"line\">[INFO] </span><br><span class=\"line\">[INFO] --- maven-dependency-plugin:2.8:analyze (default-cli) @ account-email ---</span><br><span class=\"line\">[WARNING] Unused declared dependencies found:</span><br><span class=\"line\">[WARNING]    org.springframework:spring-core:jar:4.3.3.RELEASE:compile</span><br><span class=\"line\">[WARNING]    org.springframework:spring-beans:jar:4.3.3.RELEASE:compile</span><br></pre></td></tr></table></figure>","prev":{"title":"SpringCloudConfig","link":"2020/03/12/SpringCloudConfig"},"next":{"title":"Springboot-YML配置技巧","link":"2020/03/11/Yml配置技巧"},"plink":"https://blog.bugbak.com/2020/03/12/Maven/","toc":[{"id":"坐标","title":"坐标","index":"1"},{"id":"依赖配置","title":"依赖配置","index":"2"},{"id":"依赖范围","title":"依赖范围","index":"3"},{"id":"传递性依赖","title":"传递性依赖","index":"4"},{"id":"依赖调解","title":"依赖调解","index":"5"},{"id":"排除依赖","title":"排除依赖","index":"6"},{"id":"归类依赖","title":"归类依赖","index":"7"},{"id":"优化依赖","title":"优化依赖","index":"8"}],"reward":true,"copyright":{"author":"Dz","link":"<a href=\"https://blog.bugbak.com/2020/03/12/Maven/\" title=\"Maven坐标与依赖\">https://blog.bugbak.com/2020/03/12/Maven/</a>","license":"本博客所有文章除特别声明外，均采用(<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"nofollow\" target=\"_blank\">CC BY-NC-SA 4.0</a>)许可协议，转载请注明来源<a href=\"https://blog.bugbak.com\" rel=\"nofollow\" target=\"_blank\">BugBak</a>"}}